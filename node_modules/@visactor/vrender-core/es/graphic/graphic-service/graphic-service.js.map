{"version":3,"sources":["../src/graphic/graphic-service/graphic-service.ts"],"names":[],"mappings":"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E,GAAG,CAAC,CAAC,CAAC,CAAC;IACT,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;IACT,EAAE,GAAG,CAAC,CAAC;IACP,EAAE,GAAG,CAAC,CAAC;IACP,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,EAAE,GAAG,CAAC,CAAC;IACP,EAAE,GAAG,CAAC,CAAC;IACP,EAAE,GAAG,CAAC,CAAC;IACP,EAAE,GAAG,CAAC,CAAC;IACP,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;IACT,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;IACT,EAAE,GAAG,CAAC,CAAC;IACP,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,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACnD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;IACpD,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,G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","file":"graphic-service.js","sourcesContent":["import { inject, injectable, named } from '../../common/inversify-lite';\nimport type { IAABBBounds, IBounds, IMatrix } from '@visactor/vutils';\nimport { AABBBounds, epsilon, isArray, pi2, transformBoundsWithMatrix } from '@visactor/vutils';\nimport { SyncHook } from '../../tapable';\nimport type {\n  mat4,\n  vec3,\n  IArc,\n  IArcGraphicAttribute,\n  IArea,\n  IAreaGraphicAttribute,\n  IGraphicAttribute,\n  ICircle,\n  ICircleGraphicAttribute,\n  IGraphic,\n  IGroup,\n  IGroupGraphicAttribute,\n  ILine,\n  ILineGraphicAttribute,\n  IPath,\n  IPathGraphicAttribute,\n  IPolygon,\n  IPolygonGraphicAttribute,\n  IRectGraphicAttribute,\n  IStage,\n  ISymbol,\n  ISymbolGraphicAttribute,\n  IText,\n  ITextGraphicAttribute,\n  IGlyph,\n  IGlyphGraphicAttribute,\n  IRichTextGraphicAttribute,\n  IRichText,\n  IPyramid3dGraphicAttribute,\n  IPyramid3d,\n  IArc3dGraphicAttribute,\n  IArc3d,\n  IImageGraphicAttribute,\n  ITransform,\n  IGraphicService,\n  IGraphicCreator,\n  ISyncHook,\n  IRectBoundsContribution,\n  ISymbolBoundsContribution,\n  ICircleBoundsContribution,\n  IArcBoundsContribution,\n  IPathBoundsContribution,\n  IContributionProvider\n} from '../../interface';\nimport { textDrawOffsetX } from '../../common/text';\nimport { DefaultSymbolOuterBorderBoundsContribution } from './symbol-contribution';\nimport { boundStroke } from '../tools';\nimport { mat4Allocate } from '../../allocator/matrix-allocate';\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport { ContributionProvider } from '../../common/contribution-provider';\nimport { BoundsContext } from '../../common/bounds-context';\nimport { renderCommandList } from '../../common/render-command-list';\nimport { circleBounds } from '../../common/utils';\nimport { GraphicCreator } from '../constants';\nimport { DefaultOuterBorderBoundsContribution } from './common-contribution';\n\n/**\n *  https://github.com/toji/gl-matrix\n * Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n */\n\n// gl-matrix https://github.com/toji/gl-matrix\nfunction identity(out: mat4) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out: mat4, a: mat4, rad: number) {\n  const s = Math.sin(rad);\n  const c = Math.cos(rad);\n  const a10 = a[4];\n  const a11 = a[5];\n  const a12 = a[6];\n  const a13 = a[7];\n  const a20 = a[8];\n  const a21 = a[9];\n  const a22 = a[10];\n  const a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out: mat4, a: mat4, rad: number) {\n  const s = Math.sin(rad);\n  const c = Math.cos(rad);\n  const a00 = a[0];\n  const a01 = a[1];\n  const a02 = a[2];\n  const a03 = a[3];\n  const a20 = a[8];\n  const a21 = a[9];\n  const a22 = a[10];\n  const a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateZ(out: mat4, a: mat4, rad: number) {\n  const s = Math.sin(rad);\n  const c = Math.cos(rad);\n  const a00 = a[0];\n  const a01 = a[1];\n  const a02 = a[2];\n  const a03 = a[3];\n  const a10 = a[4];\n  const a11 = a[5];\n  const a12 = a[6];\n  const a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n// gl-matrix https://github.com/toji/gl-matrix\nexport function translate(out: mat4, a: mat4, v: vec3) {\n  const x = v[0];\n  const y = v[1];\n  const z = v[2];\n  let a00;\n  let a01;\n  let a02;\n  let a03;\n  let a10;\n  let a11;\n  let a12;\n  let a13;\n  let a20;\n  let a21;\n  let a22;\n  let a23;\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n  return out;\n}\n\nexport function mat3Tomat4(out: mat4, b: IMatrix) {\n  out[0] = b.a;\n  out[1] = b.b;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = b.c;\n  out[5] = b.d;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = b.e;\n  out[13] = b.f;\n  out[14] = 0;\n  out[15] = 1;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiplyMat4Mat3(out: mat4, a: mat4, b: IMatrix) {\n  const a00 = a[0];\n  const a01 = a[1];\n  const a02 = a[2];\n  const a03 = a[3];\n  const a10 = a[4];\n  const a11 = a[5];\n  const a12 = a[6];\n  const a13 = a[7];\n  const a20 = a[8];\n  const a21 = a[9];\n  const a22 = a[10];\n  const a23 = a[11];\n  const a30 = a[12];\n  const a31 = a[13];\n  const a32 = a[14];\n  const a33 = a[15]; // Cache only the current line of the second matrix\n\n  let b0 = b.a;\n  let b1 = b.b;\n  let b2 = 0;\n  let b3 = 0;\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b.c;\n  b1 = b.d;\n  b2 = 0;\n  b3 = 0;\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = 0;\n  b1 = 0;\n  b2 = 1;\n  b3 = 0;\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b.e;\n  b1 = b.f;\n  b2 = 0;\n  b3 = 1;\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nfunction scale(out: mat4, a: mat4, v: vec3) {\n  const x = v[0];\n  const y = v[1];\n  const z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * gl-matrix https://github.com/toji/gl-matrix\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiplyMat4Mat4(out: mat4, a: mat4, b: mat4) {\n  const a00 = a[0];\n  const a01 = a[1];\n  const a02 = a[2];\n  const a03 = a[3];\n  const a10 = a[4];\n  const a11 = a[5];\n  const a12 = a[6];\n  const a13 = a[7];\n  const a20 = a[8];\n  const a21 = a[9];\n  const a22 = a[10];\n  const a23 = a[11];\n  const a30 = a[12];\n  const a31 = a[13];\n  const a32 = a[14];\n  const a33 = a[15]; // Cache only the current line of the second matrix\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\nexport function getExtraModelMatrix(dx: number, dy: number, graphic: IGraphic): mat4 | null {\n  const { alpha, beta } = graphic.attribute;\n  if (!alpha && !beta) {\n    return null;\n  }\n  const { anchor3d = graphic.attribute.anchor } = graphic.attribute;\n\n  const _anchor: [number, number] = [0, 0];\n  if (anchor3d) {\n    if (typeof anchor3d[0] === 'string') {\n      const ratio = parseFloat(anchor3d[0]) / 100;\n      const bounds = graphic.AABBBounds;\n      _anchor[0] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n    } else {\n      _anchor[0] = anchor3d[0];\n    }\n    if (typeof anchor3d[1] === 'string') {\n      const ratio = parseFloat(anchor3d[1]) / 100;\n      const bounds = graphic.AABBBounds;\n      _anchor[1] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n    } else {\n      _anchor[1] = anchor3d[1];\n    }\n  }\n\n  if (graphic.type === 'text') {\n    const { textAlign } = graphic.attribute as ITextGraphicAttribute;\n    // \n    _anchor[0] += textDrawOffsetX(textAlign, (graphic as IText).clipedWidth);\n  }\n\n  // \n  _anchor[0] += dx;\n  _anchor[1] += dy;\n  // matrix.scale(dpr, dpr);\n\n  const modelMatrix = mat4Allocate.allocate();\n  translate(modelMatrix, modelMatrix, [_anchor[0], _anchor[1], 0]);\n  if (beta) {\n    rotateX(modelMatrix, modelMatrix, beta);\n  }\n  if (alpha) {\n    rotateY(modelMatrix, modelMatrix, alpha);\n  }\n  translate(modelMatrix, modelMatrix, [-_anchor[0], -_anchor[1], 0]);\n\n  return modelMatrix;\n}\n\n// 3d\nexport function getModelMatrix(out: mat4, graphic: IGraphic, theme: ITransform) {\n  const {\n    x = theme.x,\n    y = theme.y,\n    z = theme.z,\n    dx = theme.dx,\n    dy = theme.dy,\n    dz = theme.dz,\n    scaleX = theme.scaleX,\n    scaleY = theme.scaleY,\n    scaleZ = theme.scaleZ,\n    alpha = theme.alpha,\n    beta = theme.beta,\n    angle = theme.angle,\n    anchor3d = graphic.attribute.anchor,\n    anchor\n  } = graphic.attribute;\n\n  const _anchor: [number, number, number] = [0, 0, 0];\n  if (anchor3d) {\n    if (typeof anchor3d[0] === 'string') {\n      const ratio = parseFloat(anchor3d[0]) / 100;\n      const bounds = graphic.AABBBounds;\n      _anchor[0] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n    } else {\n      _anchor[0] = anchor3d[0];\n    }\n    if (typeof anchor3d[1] === 'string') {\n      const ratio = parseFloat(anchor3d[1]) / 100;\n      const bounds = graphic.AABBBounds;\n      _anchor[1] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n    } else {\n      _anchor[1] = anchor3d[1];\n    }\n    _anchor[2] = anchor3d[2] ?? 0;\n  }\n\n  // if (graphic.type === 'text') {\n  //   const { textAlign } = graphic.attribute as ITextGraphicAttribute;\n  //   // \n  //   _anchor[0] += textDrawOffsetX(textAlign, (graphic as IText).clipedWidth);\n  // }\n\n  identity(out);\n  // \n  translate(out, out, [x + dx, y + dy, z + dz]);\n  translate(out, out, [_anchor[0], _anchor[1], _anchor[2]]);\n  rotateX(out, out, beta);\n  rotateY(out, out, alpha);\n  // zanchor\n  // rotateZ(out, out, angle);\n  translate(out, out, [-_anchor[0], -_anchor[1], _anchor[2]]);\n  scale(out, out, [scaleX, scaleY, scaleZ]);\n\n  // z\n  if (angle) {\n    const m = mat4Allocate.allocate();\n    const _anchor: [number, number] = [0, 0];\n    if (anchor) {\n      if (typeof anchor3d[0] === 'string') {\n        const ratio = parseFloat(anchor3d[0]) / 100;\n        const bounds = graphic.AABBBounds;\n        _anchor[0] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n      } else {\n        _anchor[0] = anchor3d[0];\n      }\n      if (typeof anchor3d[1] === 'string') {\n        const ratio = parseFloat(anchor3d[1]) / 100;\n        const bounds = graphic.AABBBounds;\n        _anchor[1] = bounds.x1 + (bounds.x2 - bounds.x1) * ratio;\n      } else {\n        _anchor[1] = anchor3d[1];\n      }\n    }\n\n    translate(m, m, [_anchor[0], _anchor[1], 0]);\n    // zanchor\n    rotateZ(m, m, angle);\n    translate(m, m, [-_anchor[0], -_anchor[1], 0]);\n\n    multiplyMat4Mat4(out, out, m);\n  }\n}\n\nexport function shouldUseMat4(graphic: IGraphic) {\n  const { alpha, beta } = graphic.attribute;\n  return alpha || beta;\n}\n\n// graphic\n@injectable()\nexport class DefaultGraphicService implements IGraphicService {\n  declare hooks: {\n    onAttributeUpdate: ISyncHook<[IGraphic]>;\n    onSetStage: ISyncHook<[IGraphic, IStage]>;\n    onRemove: ISyncHook<[IGraphic]>;\n    onRelease: ISyncHook<[IGraphic]>;\n    onAddIncremental: ISyncHook<[IGraphic, IGroup, IStage]>;\n    onClearIncremental: ISyncHook<[IGroup, IStage]>;\n    beforeUpdateAABBBounds: ISyncHook<[IGraphic, IStage, boolean, IAABBBounds]>;\n    afterUpdateAABBBounds: ISyncHook<[IGraphic, IStage, IAABBBounds, { globalAABBBounds: IAABBBounds }, boolean]>;\n  };\n\n  protected _rectBoundsContribitions: IRectBoundsContribution[];\n  protected _symbolBoundsContribitions: ISymbolBoundsContribution[];\n  protected _circleBoundsContribitions: ICircleBoundsContribution[];\n  protected _arcBoundsContribitions: IArcBoundsContribution[];\n  protected _pathBoundsContribitions: IPathBoundsContribution[];\n  // bounds\n  protected tempAABBBounds1: AABBBounds;\n  protected tempAABBBounds2: AABBBounds;\n  constructor(@inject(GraphicCreator) public readonly creator: IGraphicCreator) {\n    this.hooks = {\n      onAttributeUpdate: new SyncHook<[IGraphic]>(['graphic']),\n      onSetStage: new SyncHook<[IGraphic, IStage]>(['graphic', 'stage']),\n      onRemove: new SyncHook<[IGraphic]>(['graphic']),\n      onRelease: new SyncHook<[IGraphic]>(['graphic']),\n      onAddIncremental: new SyncHook<[IGraphic, IGroup, IStage]>(['graphic', 'group', 'stage']),\n      onClearIncremental: new SyncHook<[IGroup, IStage]>(['graphic', 'group', 'stage']),\n      beforeUpdateAABBBounds: new SyncHook<[IGraphic, IStage, boolean, IAABBBounds]>([\n        'graphic',\n        'stage',\n        'willUpdate',\n        'aabbBounds'\n      ]),\n      afterUpdateAABBBounds: new SyncHook<[IGraphic, IStage, IAABBBounds, { globalAABBBounds: IAABBBounds }, boolean]>([\n        'graphic',\n        'stage',\n        'aabbBounds',\n        'globalAABBBounds',\n        'selfChange'\n      ])\n    };\n    this.tempAABBBounds1 = new AABBBounds();\n    this.tempAABBBounds2 = new AABBBounds();\n    this._rectBoundsContribitions = [new DefaultOuterBorderBoundsContribution()];\n    this._symbolBoundsContribitions = [new DefaultSymbolOuterBorderBoundsContribution()];\n    this._circleBoundsContribitions = [new DefaultOuterBorderBoundsContribution()];\n    this._arcBoundsContribitions = [new DefaultOuterBorderBoundsContribution()];\n    this._pathBoundsContribitions = [new DefaultOuterBorderBoundsContribution()];\n  }\n  onAttributeUpdate(graphic: IGraphic) {\n    if (this.hooks.onAttributeUpdate.taps.length) {\n      this.hooks.onAttributeUpdate.call(graphic);\n    }\n  }\n  onSetStage(graphic: IGraphic, stage: IStage): void {\n    if (this.hooks.onSetStage.taps.length) {\n      this.hooks.onSetStage.call(graphic, stage);\n    }\n  }\n  onRemove(graphic: IGraphic<Partial<IGraphicAttribute>>): void {\n    if (this.hooks.onRemove.taps.length) {\n      this.hooks.onRemove.call(graphic);\n    }\n  }\n  onRelease(graphic: IGraphic<Partial<IGraphicAttribute>>): void {\n    if (this.hooks.onRelease.taps.length) {\n      this.hooks.onRelease.call(graphic);\n    }\n  }\n  onAddIncremental(graphic: IGraphic, group: IGroup, stage: IStage): void {\n    if (this.hooks.onAddIncremental.taps.length) {\n      this.hooks.onAddIncremental.call(graphic, group, stage);\n    }\n  }\n  onClearIncremental(group: IGroup, stage: IStage): void {\n    if (this.hooks.onClearIncremental.taps.length) {\n      this.hooks.onClearIncremental.call(group, stage);\n    }\n  }\n  beforeUpdateAABBBounds(graphic: IGraphic, stage: IStage, willUpdate: boolean, bounds: IAABBBounds) {\n    if (this.hooks.beforeUpdateAABBBounds.taps.length) {\n      this.hooks.beforeUpdateAABBBounds.call(graphic, stage, willUpdate, bounds);\n    }\n  }\n  afterUpdateAABBBounds(\n    graphic: IGraphic,\n    stage: IStage,\n    bounds: IAABBBounds,\n    params: { globalAABBBounds: IAABBBounds },\n    selfChange: boolean\n  ) {\n    if (this.hooks.afterUpdateAABBBounds.taps.length) {\n      this.hooks.afterUpdateAABBBounds.call(graphic, stage, bounds, params, selfChange);\n    }\n  }\n\n  updatePathProxyAABBBounds(aabbBounds: IAABBBounds, graphic?: IGraphic): boolean {\n    const path = typeof graphic.pathProxy === 'function' ? graphic.pathProxy(graphic.attribute) : graphic.pathProxy;\n    if (!path) {\n      return false;\n    }\n    const boundsContext = new BoundsContext(aabbBounds);\n    renderCommandList(path.commandList, boundsContext, 0, 0);\n    return true;\n  }\n\n  updateRectAABBBounds(\n    attribute: IRectGraphicAttribute,\n    rectTheme: Required<IRectGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) {\n    if (!this._validCheck(attribute, rectTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      let { width, height } = attribute;\n      const { x1, y1, x, y } = attribute;\n      width = width ?? x1 - x;\n      height = height ?? y1 - y;\n      aabbBounds.set(0, 0, width || 0, height || 0);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this._rectBoundsContribitions.length &&\n      this._rectBoundsContribitions.forEach(c => {\n        c.updateBounds(attribute, rectTheme, tb1, graphic);\n        aabbBounds.union(tb1);\n        tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n      });\n\n    this.transformAABBBounds(attribute, aabbBounds, rectTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  updateGroupAABBBounds(\n    attribute: IGroupGraphicAttribute,\n    groupTheme: Required<IGroupGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGroup\n  ) {\n    const { width, height, path, clip = groupTheme.clip } = attribute;\n    // fillclip\n    if (path && path.length) {\n      path.forEach(g => {\n        aabbBounds.union(g.AABBBounds);\n      });\n    } else if (width != null && height != null) {\n      aabbBounds.set(0, 0, width, height);\n    }\n    if (!clip) {\n      // \n      graphic.forEachChildren((node: IGraphic) => {\n        aabbBounds.union(node.AABBBounds);\n      });\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this.transformAABBBounds(attribute, aabbBounds, groupTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  updateGlyphAABBBounds(\n    attribute: IGlyphGraphicAttribute,\n    theme: Required<IGlyphGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGlyph\n  ) {\n    if (!this._validCheck(attribute, theme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    // \n    graphic.getSubGraphic().forEach((node: IGraphic) => {\n      aabbBounds.union(node.AABBBounds);\n    });\n\n    // glyphAABBBounds\n    // this.transformAABBBounds(attribute, aabbBounds, theme, graphic);\n    return aabbBounds;\n  }\n\n  updateRichTextAABBBounds(\n    attribute: IRichTextGraphicAttribute,\n    richtextTheme: Required<IRichTextGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IRichText\n  ) {\n    if (!this._validCheck(attribute, richtextTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!graphic) {\n      return aabbBounds;\n    }\n\n    const {\n      width = richtextTheme.width,\n      height = richtextTheme.height,\n      maxWidth = richtextTheme.maxWidth,\n      maxHeight = richtextTheme.maxHeight,\n      textAlign = richtextTheme.textAlign,\n      textBaseline = richtextTheme.textBaseline\n    } = attribute;\n\n    if (width > 0 && height > 0) {\n      // \n      aabbBounds.set(0, 0, width, height);\n    } else {\n      // \n      const frameCache = graphic.getFrameCache();\n      const { width: actualWidth, height: actualHeight } = frameCache.getActualSize();\n      let contentWidth = width || actualWidth || 0;\n      let contentHeight = height || actualHeight || 0;\n\n      contentHeight = typeof maxHeight === 'number' && contentHeight > maxHeight ? maxHeight : contentHeight || 0;\n      contentWidth = typeof maxWidth === 'number' && contentWidth > maxWidth ? maxWidth : contentWidth || 0;\n\n      aabbBounds.set(0, 0, contentWidth, contentHeight);\n    }\n\n    // \n    let deltaY = 0;\n    switch (textBaseline) {\n      case 'top':\n        deltaY = 0;\n        break;\n      case 'middle':\n        deltaY = -aabbBounds.height() / 2;\n        break;\n      case 'bottom':\n        deltaY = -aabbBounds.height();\n        break;\n      default:\n        break;\n    }\n    let deltaX = 0;\n    switch (textAlign) {\n      case 'left':\n        deltaX = 0;\n        break;\n      case 'center':\n        deltaX = -aabbBounds.width() / 2;\n        break;\n      case 'right':\n        deltaX = -aabbBounds.width();\n        break;\n      default:\n        break;\n    }\n    aabbBounds.translate(deltaX, deltaY);\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n\n    this.transformAABBBounds(attribute, aabbBounds, richtextTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  updateTextAABBBounds(\n    attribute: ITextGraphicAttribute,\n    textTheme: Required<ITextGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IText\n  ) {\n    if (!this._validCheck(attribute, textTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!graphic) {\n      return aabbBounds;\n    }\n    const { text = textTheme.text } = graphic.attribute;\n    if (Array.isArray(text)) {\n      graphic.updateMultilineAABBBounds(text as (number | string)[]);\n    } else {\n      graphic.updateSingallineAABBBounds(text as number | string);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n\n    const {\n      scaleX = textTheme.scaleX,\n      scaleY = textTheme.scaleY,\n      shadowBlur = textTheme.shadowBlur,\n      strokeBoundsBuffer = textTheme.strokeBoundsBuffer\n    } = attribute;\n    if (shadowBlur) {\n      const shadowBlurHalfWidth = shadowBlur / Math.abs(scaleX + scaleY);\n      boundStroke(tb1, shadowBlurHalfWidth, true, strokeBoundsBuffer);\n      aabbBounds.union(tb1);\n    }\n    // shadowRootbounds\n    this.combindShadowAABBBounds(aabbBounds, graphic);\n\n    transformBoundsWithMatrix(aabbBounds, aabbBounds, graphic.transMatrix);\n    return aabbBounds;\n  }\n\n  updatePathAABBBounds(\n    attribute: IPathGraphicAttribute,\n    pathTheme: Required<IPathGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IPath\n  ) {\n    if (!this._validCheck(attribute, pathTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      this.updatePathAABBBoundsImprecise(attribute, pathTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this._pathBoundsContribitions.length &&\n      this._pathBoundsContribitions.forEach(c => {\n        c.updateBounds(attribute, pathTheme, tb1, graphic);\n        aabbBounds.union(tb1);\n        tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n      });\n    const { lineJoin = pathTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, pathTheme, lineJoin === 'miter', graphic);\n    return aabbBounds;\n  }\n\n  protected updatePathAABBBoundsImprecise(\n    attribute: IPathGraphicAttribute,\n    pathTheme: Required<IPathGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IPath\n  ): IAABBBounds {\n    if (!graphic) {\n      return aabbBounds;\n    }\n    const pathShape = graphic.getParsedPathShape();\n    aabbBounds.union(pathShape.getBounds());\n\n    return aabbBounds;\n  }\n\n  updatePyramid3dAABBBounds(\n    attribute: IPyramid3dGraphicAttribute,\n    polygonTheme: Required<IPyramid3dGraphicAttribute>,\n    aabbBounds: IBounds,\n    graphic?: IPyramid3d\n  ) {\n    if (!graphic) {\n      return aabbBounds;\n    }\n\n    const stage = graphic.stage;\n    if (!stage || !stage.camera) {\n      return aabbBounds;\n    }\n\n    const faces = graphic.findFace();\n    // const outP = [0, 0, 0];\n    faces.vertices.forEach(v => {\n      const x = v[0];\n      const y = v[1];\n      aabbBounds.add(x, y);\n    });\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n\n    this.transformAABBBounds(attribute, aabbBounds, polygonTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  updateArc3dAABBBounds(\n    attribute: IArc3dGraphicAttribute,\n    arcTheme: Required<IArc3dGraphicAttribute>,\n    aabbBounds: IBounds,\n    graphic?: IArc3d\n  ) {\n    if (!graphic) {\n      return aabbBounds;\n    }\n\n    const stage = graphic.stage;\n    if (!stage || !stage.camera) {\n      return aabbBounds;\n    }\n\n    // \n    const { outerRadius = arcTheme.outerRadius, height = 0 } = attribute;\n    const r = outerRadius + height;\n    aabbBounds.setValue(-r, -r, r, r);\n    // const matrix = getExtraModelMatrix(graphic.globalTransMatrix, 1, graphic);\n    // const { outerRadius=arcTheme.outerRadius, height=0 } = attribute;\n    // const points = [\n    //   {x: -outerRadius, y: -outerRadius, z: 0 },\n    //   {x: outerRadius, y: -outerRadius, z: 0 },\n    //   {x: outerRadius, y: outerRadius, z: 0 },\n    //   {x: -outerRadius, y: outerRadius, z: 0 },\n    //   {x: -outerRadius, y: -outerRadius, z: height },\n    //   {x: outerRadius, y: -outerRadius, z: height },\n    //   {x: outerRadius, y: outerRadius, z: height },\n    //   {x: -outerRadius, y: outerRadius, z: height },\n    // ]\n    // const outP: vec3 = [0, 0, 0];\n    // points.forEach(item => {\n    //   let x = item.x;\n    //   let y = item.y;\n    //   if (stage.camera) {\n    //     transformMat4(outP, [item.x, item.y, item.z], matrix);\n    //     const data = stage.camera.vp(outP[0], outP[1], outP[2]);\n    //     x = data.x;\n    //     y = data.y;\n    //   }\n    //   aabbBounds.add(x, y);\n    // });\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n\n    this.transformAABBBounds(attribute, aabbBounds, arcTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  updatePolygonAABBBounds(\n    attribute: IPolygonGraphicAttribute,\n    polygonTheme: Required<IPolygonGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IPolygon\n  ) {\n    if (!this._validCheck(attribute, polygonTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      this.updatePolygonAABBBoundsImprecise(attribute, polygonTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    // if (!this._pathBoundsContribitions) {\n    //   this._pathBoundsContribitions = this.pathBoundsContribitions.getContributions() || [];\n    // }\n    // this._pathBoundsContribitions.length &&\n    //   this._pathBoundsContribitions.forEach(c => {\n    //     c.updateBounds(attribute, polygonTheme, tb1, graphic);\n    //     aabbBounds.union(tb1);\n    //     tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n    //   });\n\n    const { lineJoin = polygonTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, polygonTheme, lineJoin === 'miter', graphic);\n    return aabbBounds;\n  }\n\n  protected updatePolygonAABBBoundsImprecise(\n    attribute: IPolygonGraphicAttribute,\n    polygonTheme: Required<IPolygonGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IPolygon\n  ): IAABBBounds {\n    const { points = polygonTheme.points } = attribute;\n    points.forEach(p => {\n      aabbBounds.add(p.x, p.y);\n    });\n\n    return aabbBounds;\n  }\n\n  updateLineAABBBounds(\n    attribute: ILineGraphicAttribute,\n    lineTheme: Required<ILineGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: ILine\n  ) {\n    if (!this._validCheck(attribute, lineTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      attribute.segments\n        ? this.updateLineAABBBoundsBySegments(attribute, lineTheme, aabbBounds, graphic)\n        : this.updateLineAABBBoundsByPoints(attribute, lineTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    // if (!this._rectBoundsContribitions) {\n    //   this._rectBoundsContribitions = this.rectBoundsContribitions.getContributions() || [];\n    // }\n    // this._rectBoundsContribitions.length &&\n    //   this._rectBoundsContribitions.forEach(c => {\n    //     c.updateBounds(attribute, areaTheme, tb1, graphic);\n    //     aabbBounds.union(tb1);\n    //     tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n    //   });\n\n    const { lineJoin = lineTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, lineTheme, lineJoin === 'miter', graphic);\n    return aabbBounds;\n  }\n\n  protected updateLineAABBBoundsByPoints(\n    attribute: ILineGraphicAttribute,\n    lineTheme: Required<ILineGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: ILine\n  ): IAABBBounds {\n    const { points = lineTheme.points } = attribute;\n    const b = aabbBounds;\n    points.forEach(p => {\n      b.add(p.x, p.y);\n    });\n    return b;\n  }\n  protected updateLineAABBBoundsBySegments(\n    attribute: ILineGraphicAttribute,\n    lineTheme: Required<ILineGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: ILine\n  ): IAABBBounds {\n    const { segments = lineTheme.segments } = attribute;\n    const b = aabbBounds;\n    segments.forEach(s => {\n      s.points.forEach(p => {\n        b.add(p.x, p.y);\n      });\n    });\n    return b;\n  }\n\n  updateAreaAABBBounds(\n    attribute: IAreaGraphicAttribute,\n    areaTheme: Required<IAreaGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IArea\n  ) {\n    if (!this._validCheck(attribute, areaTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      attribute.segments\n        ? this.updateAreaAABBBoundsBySegments(attribute, areaTheme, aabbBounds, graphic)\n        : this.updateAreaAABBBoundsByPoints(attribute, areaTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    // if (!this._rectBoundsContribitions) {\n    //   this._rectBoundsContribitions = this.rectBoundsContribitions.getContributions() || [];\n    // }\n    // this._rectBoundsContribitions.length &&\n    //   this._rectBoundsContribitions.forEach(c => {\n    //     c.updateBounds(attribute, areaTheme, tb1, graphic);\n    //     aabbBounds.union(tb1);\n    //     tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n    //   });\n\n    const { lineJoin = areaTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, areaTheme, lineJoin === 'miter', graphic);\n    return aabbBounds;\n  }\n\n  protected updateAreaAABBBoundsByPoints(\n    attribute: IAreaGraphicAttribute,\n    areaTheme: Required<IAreaGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IArea\n  ): IAABBBounds {\n    const { points = areaTheme.points } = attribute;\n    const b = aabbBounds;\n    points.forEach(p => {\n      b.add(p.x, p.y);\n      b.add(p.x1 ?? p.x, p.y1 ?? p.y); //x1y1\n    });\n    return b;\n  }\n  protected updateAreaAABBBoundsBySegments(\n    attribute: IAreaGraphicAttribute,\n    areaTheme: Required<IAreaGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IArea\n  ): IAABBBounds {\n    const { segments = areaTheme.segments } = attribute;\n    const b = aabbBounds;\n    segments.forEach(s => {\n      s.points.forEach(p => {\n        b.add(p.x, p.y);\n        b.add(p.x1 ?? p.x, p.y1 ?? p.y); //x1y1\n      });\n    });\n    return b;\n  }\n\n  updateCircleAABBBounds(\n    attribute: ICircleGraphicAttribute,\n    circleTheme: Required<ICircleGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    full?: boolean,\n    graphic?: ICircle\n  ) {\n    if (!this._validCheck(attribute, circleTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      full\n        ? this.updateCircleAABBBoundsImprecise(attribute, circleTheme, aabbBounds, graphic)\n        : this.updateCircleAABBBoundsAccurate(attribute, circleTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this._circleBoundsContribitions.length &&\n      this._circleBoundsContribitions.forEach(c => {\n        c.updateBounds(attribute, circleTheme, tb1, graphic);\n        aabbBounds.union(tb1);\n        tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n      });\n\n    this.transformAABBBounds(attribute, aabbBounds, circleTheme, false, graphic);\n\n    return aabbBounds;\n  }\n\n  protected updateCircleAABBBoundsImprecise(\n    attribute: ICircleGraphicAttribute,\n    circleTheme: Required<ICircleGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    const { radius = circleTheme.radius } = attribute;\n    aabbBounds.set(-radius, -radius, radius, radius);\n\n    return aabbBounds;\n  }\n  protected updateCircleAABBBoundsAccurate(\n    attribute: ICircleGraphicAttribute,\n    circleTheme: Required<ICircleGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    const {\n      startAngle = circleTheme.startAngle,\n      endAngle = circleTheme.endAngle,\n      radius = circleTheme.radius\n    } = attribute;\n\n    if (endAngle - startAngle > pi2 - epsilon) {\n      aabbBounds.set(-radius, -radius, radius, radius);\n    } else {\n      circleBounds(startAngle, endAngle, radius, aabbBounds);\n    }\n\n    return aabbBounds;\n  }\n\n  updateArcAABBBounds(\n    attribute: IArcGraphicAttribute,\n    arcTheme: Required<IArcGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    full?: boolean,\n    graphic?: IArc\n  ) {\n    if (!this._validCheck(attribute, arcTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      full\n        ? this.updateArcAABBBoundsImprecise(attribute, arcTheme, aabbBounds, graphic)\n        : this.updateArcAABBBoundsAccurate(attribute, arcTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this._arcBoundsContribitions.length &&\n      this._arcBoundsContribitions.forEach(c => {\n        c.updateBounds(attribute, arcTheme, tb1, graphic);\n        aabbBounds.union(tb1);\n        tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n      });\n\n    const { lineJoin = arcTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, arcTheme, lineJoin === 'miter', graphic);\n\n    return aabbBounds;\n  }\n\n  protected updateArcAABBBoundsImprecise(\n    attribute: IArcGraphicAttribute,\n    arcTheme: Required<IArcGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    const { innerRadius = arcTheme.innerRadius } = attribute;\n    let { outerRadius = arcTheme.outerRadius } = attribute;\n    if (outerRadius < innerRadius) {\n      outerRadius = innerRadius;\n    }\n\n    aabbBounds.set(-outerRadius, -outerRadius, outerRadius, outerRadius);\n\n    return aabbBounds;\n  }\n  protected updateArcAABBBoundsAccurate(\n    attribute: IArcGraphicAttribute,\n    arcTheme: Required<IArcGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    let { outerRadius = arcTheme.outerRadius, innerRadius = arcTheme.innerRadius } = attribute;\n    if (outerRadius < innerRadius) {\n      // \n      const temp = outerRadius;\n      outerRadius = innerRadius;\n      innerRadius = temp;\n    }\n    let { endAngle = arcTheme.endAngle, startAngle = arcTheme.startAngle } = attribute;\n\n    if (startAngle > endAngle) {\n      const temp = startAngle;\n      startAngle = endAngle;\n      endAngle = temp;\n    }\n\n    if (outerRadius <= epsilon) {\n      aabbBounds.set(0, 0, 0, 0);\n    } else if (Math.abs(endAngle - startAngle) > pi2 - epsilon) {\n      aabbBounds.set(-outerRadius, -outerRadius, outerRadius, outerRadius);\n    } else {\n      // radius\n      circleBounds(startAngle, endAngle, outerRadius, aabbBounds);\n      circleBounds(startAngle, endAngle, innerRadius, aabbBounds);\n    }\n\n    return aabbBounds;\n  }\n\n  updateSymbolAABBBounds(\n    attribute: ISymbolGraphicAttribute,\n    symbolTheme: Required<ISymbolGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    full?: boolean,\n    graphic?: ISymbol\n  ) {\n    if (!this._validCheck(attribute, symbolTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      full\n        ? this.updateSymbolAABBBoundsImprecise(attribute, symbolTheme, aabbBounds, graphic)\n        : this.updateSymbolAABBBoundsAccurate(attribute, symbolTheme, aabbBounds, graphic);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    this._symbolBoundsContribitions.length &&\n      this._symbolBoundsContribitions.forEach(c => {\n        c.updateBounds(attribute, symbolTheme, tb1, graphic);\n        aabbBounds.union(tb1);\n        tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n      });\n\n    const { lineJoin = symbolTheme.lineJoin } = attribute;\n    this.transformAABBBounds(attribute, aabbBounds, symbolTheme, lineJoin === 'miter', graphic);\n    return aabbBounds;\n  }\n\n  protected updateSymbolAABBBoundsImprecise(\n    attribute: ISymbolGraphicAttribute,\n    symbolTheme: Required<ISymbolGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): IAABBBounds {\n    // \n    const { size = symbolTheme.size } = attribute;\n\n    if (isArray(size)) {\n      aabbBounds.set(-size[0] / 2, -size[1] / 2, size[0] / 2, size[1] / 2);\n    } else {\n      const halfWH = size / 2;\n\n      aabbBounds.set(-halfWH, -halfWH, halfWH, halfWH);\n    }\n\n    return aabbBounds;\n  }\n\n  protected updateSymbolAABBBoundsAccurate(\n    attribute: ISymbolGraphicAttribute,\n    symbolTheme: Required<ISymbolGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: ISymbol\n  ): IAABBBounds {\n    if (!graphic) {\n      return aabbBounds;\n    }\n    const { size = symbolTheme.size } = attribute;\n\n    const symbolClass = graphic.getParsedPath();\n    symbolClass.bounds(size, aabbBounds);\n\n    return aabbBounds;\n  }\n\n  updateImageAABBBounds(\n    attribute: IImageGraphicAttribute,\n    imageTheme: Required<IImageGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) {\n    if (!this._validCheck(attribute, imageTheme, aabbBounds, graphic)) {\n      return aabbBounds;\n    }\n    if (!this.updatePathProxyAABBBounds(aabbBounds, graphic)) {\n      const { width = imageTheme.width, height = imageTheme.height } = attribute;\n      aabbBounds.set(0, 0, width, height);\n    }\n\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    tb1.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n    tb2.setValue(aabbBounds.x1, aabbBounds.y1, aabbBounds.x2, aabbBounds.y2);\n\n    this.transformAABBBounds(attribute, aabbBounds, imageTheme, false, graphic);\n    return aabbBounds;\n  }\n\n  combindShadowAABBBounds(bounds: IAABBBounds, graphic?: IGraphic) {\n    // shadowRootBounds\n    if (graphic && graphic.shadowRoot) {\n      const b = graphic.shadowRoot.AABBBounds;\n      bounds.union(b);\n    }\n  }\n\n  transformAABBBounds(\n    attribute: Partial<IGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    theme: Required<IGraphicAttribute>,\n    miter: boolean,\n    graphic?: IGraphic\n  ) {\n    const {\n      scaleX = theme.scaleX,\n      scaleY = theme.scaleY,\n      stroke = theme.stroke,\n      shadowBlur = theme.shadowBlur,\n      lineWidth = theme.lineWidth,\n      pickStrokeBuffer = theme.pickStrokeBuffer,\n      strokeBoundsBuffer = theme.strokeBoundsBuffer\n    } = attribute;\n    const tb1 = this.tempAABBBounds1;\n    const tb2 = this.tempAABBBounds2;\n    if (stroke && lineWidth) {\n      const scaledHalfLineWidth = (lineWidth + pickStrokeBuffer) / Math.abs(scaleX + scaleY);\n      boundStroke(tb1, scaledHalfLineWidth, miter, strokeBoundsBuffer);\n      aabbBounds.union(tb1);\n      tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n    }\n    if (shadowBlur) {\n      const { shadowOffsetX = theme.shadowOffsetX, shadowOffsetY = theme.shadowOffsetY } = attribute;\n      const shadowBlurWidth = (shadowBlur / Math.abs(scaleX + scaleY)) * 2;\n      boundStroke(tb1, shadowBlurWidth, false, strokeBoundsBuffer + 1);\n      tb1.translate(shadowOffsetX, shadowOffsetY);\n      aabbBounds.union(tb1);\n      // tb1.setValue(tb2.x1, tb2.y1, tb2.x2, tb2.y2);\n    }\n\n    // shadowRootbounds\n    this.combindShadowAABBBounds(aabbBounds, graphic);\n\n    // group\n    let updateMatrix = true;\n    const m = graphic.transMatrix;\n    if (graphic && graphic.isContainer) {\n      updateMatrix = !(m.a === 1 && m.b === 0 && m.c === 0 && m.d === 1 && m.e === 0 && m.f === 0);\n    }\n    updateMatrix && transformBoundsWithMatrix(aabbBounds, aabbBounds, m);\n\n    // TODO \n    // transformBounds(aabbBounds, x, y, scaleX, scaleY, angle);\n    // if (graphic.attribute.postMatrix) {\n    //   console.log('aaa');\n    //   transformBoundsWithMatrix(aabbBounds, graphic.attribute.postMatrix);\n    // }\n    // aabbBounds.translate(dx, dy);\n  }\n\n  protected _validCheck(\n    attribute: Partial<IGraphicAttribute>,\n    theme: Required<IGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ): boolean {\n    if (!graphic) {\n      return true;\n    }\n    if (!graphic.valid) {\n      aabbBounds.clear();\n      return false;\n    }\n    const { visible = theme.visible } = attribute;\n    if (!visible) {\n      aabbBounds.clear();\n      return false;\n    }\n    return true;\n  }\n}\n"]}