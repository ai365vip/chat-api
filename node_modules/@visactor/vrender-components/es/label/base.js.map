{"version":3,"sources":["../src/label/base.ts"],"names":[],"mappings":"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","file":"base.js","sourcesContent":["/**\n * @description Label 基类\n */\nimport type {\n  IGroup,\n  Text,\n  IGraphic,\n  IText,\n  FederatedPointerEvent,\n  IColor,\n  ILine,\n  IArea,\n  IRichTextGraphicAttribute,\n  IRichText,\n  IRichTextCharacter\n} from '@visactor/vrender-core';\nimport { graphicCreator, AttributeUpdateType, IContainPointMode } from '@visactor/vrender-core';\nimport type { IAABBBounds, IBoundsLike, IPointLike } from '@visactor/vutils';\nimport {\n  isFunction,\n  isEmpty,\n  isValid,\n  isString,\n  merge,\n  isRectIntersect,\n  isNil,\n  isArray,\n  isObject\n} from '@visactor/vutils';\nimport { AbstractComponent } from '../core/base';\nimport type { PointLocationCfg } from '../core/type';\nimport { labelSmartInvert, contrastAccessibilityChecker, smartInvertStrategy } from '../util/label-smartInvert';\nimport { getMarksByName, getNoneGroupMarksByName, traverseGroup } from '../util';\nimport { StateValue } from '../constant';\nimport type { Bitmap } from './overlap';\nimport { bitmapTool, boundToRange, canPlace, clampText, place } from './overlap';\nimport type {\n  BaseLabelAttrs,\n  OverlapAttrs,\n  ILabelAnimation,\n  LabelItem,\n  SmartInvertAttrs,\n  ILabelEnterAnimation,\n  ILabelExitAnimation,\n  ILabelUpdateAnimation,\n  LabelContent\n} from './type';\nimport { DefaultLabelAnimation, getAnimationAttributes, updateAnimation } from './animate/animate';\nimport { connectLineBetweenBounds, getPointsOfLineArea } from './util';\nimport type { ComponentOptions } from '../interface';\nimport { DEFAULT_HTML_TEXT_SPEC } from '../constant';\nimport { loadLabelComponent } from './register';\n\nloadLabelComponent();\nexport class LabelBase<T extends BaseLabelAttrs> extends AbstractComponent<T> {\n  name = 'label';\n\n  protected _baseMarks?: IGraphic[];\n\n  protected _isCollectionBase: boolean;\n\n  protected _bitmap?: Bitmap;\n\n  protected _animationConfig?: {\n    enter: ILabelEnterAnimation;\n    exit: ILabelExitAnimation;\n    update: ILabelUpdateAnimation;\n  };\n\n  static defaultAttributes: Partial<BaseLabelAttrs> = {\n    textStyle: {\n      fontSize: 12,\n      // FIXME: we need a default color. Yet in current logic, textStyle will override fill from baseMark.\n      // This need a new config option like `colorFull`\n      // fill: '#000',\n      textAlign: 'center',\n      textBaseline: 'middle',\n      boundsPadding: [-1, 0, -1, 0] // to ignore the textBound buf\n    },\n    offset: 0,\n    pickable: false\n  };\n\n  setBitmap(bitmap: Bitmap) {\n    this._bitmap = bitmap;\n  }\n\n  protected _bmpTool?: ReturnType<typeof bitmapTool>;\n  setBitmapTool(bmpTool: ReturnType<typeof bitmapTool>) {\n    this._bmpTool = bmpTool;\n  }\n\n  protected _graphicToText: Map<IGraphic, LabelContent>;\n\n  protected _idToGraphic: Map<string, IGraphic>;\n\n  protected _idToPoint: Map<string, IPointLike>;\n\n  onAfterLabelOverlap?: (bitmap: Bitmap) => void;\n\n  private _lastHover: IGraphic;\n  private _lastSelect: IGraphic;\n\n  private _enableAnimation: boolean;\n\n  constructor(attributes: BaseLabelAttrs, options?: ComponentOptions) {\n    super(options?.skipDefault ? attributes : merge({}, LabelBase.defaultAttributes, attributes));\n  }\n\n  /**\n   * 计算 text 的最终位置属性x, y\n   * @param textBounds\n   * @param graphicBounds\n   * @param position\n   * @param offset\n   * @returns\n   */\n  protected labeling(\n    textBounds: IBoundsLike,\n    graphicBounds: IBoundsLike,\n    position?: BaseLabelAttrs['position'],\n    offset?: number\n  ): { x: number; y: number } | undefined {\n    // 基类没有指定的图元类型，需要在 data 中指定位置，故无需进行 labeling\n    return;\n  }\n\n  protected _createLabelLine(text: IText | IRichText, baseMark?: IGraphic): ILine | undefined {\n    const points = connectLineBetweenBounds(text.AABBBounds, baseMark?.AABBBounds);\n    if (points) {\n      const line = graphicCreator.line({\n        points\n      });\n\n      if (baseMark && baseMark.attribute.fill) {\n        line.setAttribute('stroke', baseMark.attribute.fill);\n      }\n\n      if (this.attribute.line && !isEmpty(this.attribute.line.style)) {\n        line.setAttributes(this.attribute.line.style);\n      }\n      this._setStatesOfLabelLine(line);\n      return line;\n    }\n  }\n\n  protected render() {\n    this._prepare();\n    if (isNil(this._idToGraphic) || (this._isCollectionBase && isNil(this._idToPoint))) {\n      return;\n    }\n\n    const { overlap, smartInvert, dataFilter, customLayoutFunc, customOverlapFunc } = this.attribute;\n    let data = this.attribute.data;\n\n    if (isFunction(dataFilter)) {\n      data = dataFilter(data);\n    }\n\n    let labels: (IText | IRichText)[];\n\n    if (isFunction(customLayoutFunc)) {\n      labels = customLayoutFunc(\n        data,\n        this.getRelatedGraphic.bind(this),\n        this._isCollectionBase ? (d: LabelItem) => this._idToPoint.get(d.id) : null\n      );\n    } else {\n      // 根据关联图元和配置的position计算标签坐标\n      labels = this._layout(data);\n    }\n\n    if (isFunction(customOverlapFunc)) {\n      labels = customOverlapFunc(\n        labels as Text[],\n        this.getRelatedGraphic.bind(this),\n        this._isCollectionBase ? (d: LabelItem) => this._idToPoint.get(d.id) : null\n      );\n    } else {\n      // 防重叠逻辑\n      if (overlap !== false) {\n        labels = this._overlapping(labels);\n      }\n    }\n\n    if (labels && labels.length) {\n      labels.forEach(label => {\n        this._bindEvent(label);\n        this._setStatesOfText(label);\n      });\n    }\n\n    if (smartInvert !== false) {\n      this._smartInvert(labels);\n    }\n\n    this._renderLabels(labels);\n  }\n\n  private _bindEvent(target: IGraphic) {\n    if (this.attribute.disableTriggerEvent) {\n      return;\n    }\n    if (!target) {\n      return;\n    }\n\n    const { hover, select } = this.attribute;\n\n    if (hover) {\n      target.addEventListener('pointermove', this._onHover as EventListenerOrEventListenerObject);\n      target.addEventListener('pointerout', this._onUnHover as EventListenerOrEventListenerObject);\n    }\n\n    if (select) {\n      target.addEventListener('pointerdown', this._onClick as EventListenerOrEventListenerObject);\n    }\n  }\n\n  private _setStatesOfText(target: IGraphic) {\n    if (!target) {\n      return;\n    }\n    const state = this.attribute.state;\n\n    if (!state || isEmpty(state)) {\n      return;\n    }\n\n    target.states = state;\n  }\n\n  protected _setStatesOfLabelLine(target: IGraphic) {\n    if (!target) {\n      return;\n    }\n    const state = this.attribute.labelLineState;\n\n    if (!state || isEmpty(state)) {\n      return;\n    }\n\n    target.states = state;\n  }\n\n  private _onHover = (e: FederatedPointerEvent) => {\n    const target = e.target as unknown as IGraphic;\n    if (target !== this._lastHover && !isEmpty(target.states)) {\n      target.addState(StateValue.hover, true);\n      traverseGroup(this as unknown as IGraphic, (node: IGraphic) => {\n        if (node !== target && !isEmpty(node.states)) {\n          node.addState(StateValue.hoverReverse, true);\n        }\n      });\n      this._lastHover = target;\n    }\n  };\n\n  private _onUnHover = (e: FederatedPointerEvent) => {\n    if (this._lastHover) {\n      traverseGroup(this as unknown as IGraphic, (node: IGraphic) => {\n        if (!isEmpty(node.states)) {\n          node.removeState(StateValue.hoverReverse);\n          node.removeState(StateValue.hover);\n        }\n      });\n      this._lastHover = null;\n    }\n  };\n\n  private _onClick = (e: FederatedPointerEvent) => {\n    const target = e.target as unknown as IGraphic;\n    if (this._lastSelect === target && target.hasState('selected')) {\n      // 取消选中\n      this._lastSelect = null;\n      traverseGroup(this as unknown as IGraphic, (node: IGraphic) => {\n        if (!isEmpty(node.states)) {\n          node.removeState(StateValue.selectedReverse);\n          node.removeState(StateValue.selected);\n        }\n      });\n      return;\n    }\n\n    if (!isEmpty(target.states)) {\n      target.addState(StateValue.selected, true);\n      traverseGroup(this as unknown as IGraphic, (node: IGraphic) => {\n        if (node !== target && !isEmpty(node.states)) {\n          node.addState(StateValue.selectedReverse, true);\n        }\n      });\n      this._lastSelect = target;\n    }\n  };\n\n  protected _createLabelText(attributes: LabelItem) {\n    if (attributes.textType === 'rich') {\n      attributes.textConfig = attributes.text as IRichTextCharacter[];\n      attributes.width = attributes.width ?? 0;\n      attributes.height = attributes.height ?? 0;\n      const text = graphicCreator.richtext(attributes as any);\n      return text;\n    } else if (attributes.textType === 'html') {\n      attributes.textConfig = [] as IRichTextCharacter[];\n      attributes.html = {\n        dom: attributes.text as string,\n        ...DEFAULT_HTML_TEXT_SPEC,\n        ...attributes\n      };\n      const text = graphicCreator.richtext(attributes as IRichTextGraphicAttribute);\n      return text;\n    }\n    const text = graphicCreator.text(attributes);\n    return text;\n  }\n\n  private _prepare() {\n    const currentBaseMarks: IGraphic[] = [];\n    let baseMarks;\n    if (isFunction(this.attribute.getBaseMarks)) {\n      baseMarks = this.attribute.getBaseMarks();\n    } else {\n      baseMarks = getMarksByName(this.getRootNode() as IGroup, this.attribute.baseMarkGroupName);\n    }\n\n    baseMarks.forEach(mark => {\n      if ((mark as any).releaseStatus !== 'willRelease') {\n        currentBaseMarks.push(mark);\n      }\n    });\n\n    this._idToGraphic?.clear();\n    this._idToPoint?.clear();\n    this._baseMarks = currentBaseMarks;\n    this._isCollectionBase = this.attribute.type === 'line-data';\n\n    if (!currentBaseMarks || currentBaseMarks.length === 0) {\n      return;\n    }\n\n    const { data } = this.attribute;\n\n    if (!data || data.length === 0) {\n      return;\n    }\n    if (!this._idToGraphic) {\n      this._idToGraphic = new Map();\n    }\n\n    // generate id mapping before data filter\n    if (this._isCollectionBase) {\n      if (!this._idToPoint) {\n        this._idToPoint = new Map();\n      }\n      let cur = 0;\n      for (let i = 0; i < currentBaseMarks.length; i++) {\n        const baseMark = currentBaseMarks[i];\n        const points = getPointsOfLineArea(baseMark as ILine | IArea);\n\n        if (points && points.length) {\n          for (let j = 0; j < points.length; j++) {\n            const textData = data[cur];\n            if (textData && points[j]) {\n              if (!isValid(textData.id)) {\n                textData.id = `vrender-component-${this.name}-${cur}`;\n              }\n              this._idToPoint.set(textData.id, points[j]);\n              this._idToGraphic.set(textData.id, baseMark);\n            }\n\n            cur++;\n          }\n        }\n      }\n    } else {\n      for (let i = 0; i < currentBaseMarks.length; i++) {\n        const textData = data[i];\n        const baseMark = currentBaseMarks[i] as IGraphic;\n        if (textData && baseMark) {\n          if (!isValid(textData.id)) {\n            textData.id = `vrender-component-${this.name}-${i}`;\n          }\n          this._idToGraphic.set(textData.id, baseMark);\n        }\n      }\n    }\n\n    if (this.attribute.animation !== false) {\n      const animation = isObject(this.attribute.animation) ? this.attribute.animation : {};\n      this._animationConfig = {\n        enter: merge({}, DefaultLabelAnimation, animation, this.attribute.animationEnter ?? {}),\n        exit: merge({}, DefaultLabelAnimation, animation, this.attribute.animationExit ?? {}),\n        update: isArray(this.attribute.animationUpdate)\n          ? this.attribute.animationUpdate\n          : merge({}, DefaultLabelAnimation, animation, this.attribute.animationUpdate ?? {})\n      };\n    }\n  }\n\n  protected getRelatedGraphic(item: LabelItem) {\n    return this._idToGraphic.get(item.id);\n  }\n\n  protected _layout(data: LabelItem[] = []): (IText | IRichText)[] {\n    const { textStyle = {}, position, offset } = this.attribute;\n    const labels = [];\n    for (let i = 0; i < data.length; i++) {\n      const textData = data[i];\n      const baseMark = this.getRelatedGraphic(textData);\n      if (!baseMark) {\n        continue;\n      }\n\n      const labelAttribute = {\n        fill: this._isCollectionBase\n          ? isArray(baseMark.attribute.stroke)\n            ? baseMark.attribute.stroke.find(entry => !!entry && entry !== true)\n            : baseMark.attribute.stroke\n          : baseMark.attribute.fill,\n        ...textStyle,\n        ...textData\n      };\n      const text = this._createLabelText(labelAttribute);\n      const textBounds = this.getGraphicBounds(text);\n      const actualPosition = isFunction(position) ? position(textData) : (position as string);\n\n      const graphicBounds = this._isCollectionBase\n        ? this.getGraphicBounds(null, this._idToPoint.get(textData.id), actualPosition)\n        : this.getGraphicBounds(baseMark, { x: textData.x as number, y: textData.y as number }, actualPosition);\n\n      const textLocation = this.labeling(textBounds, graphicBounds, actualPosition, offset);\n\n      if (textLocation) {\n        labelAttribute.x = textLocation.x;\n        labelAttribute.y = textLocation.y;\n        text.setAttributes(textLocation);\n      }\n\n      labels.push(text);\n    }\n\n    return labels;\n  }\n\n  protected _overlapping(labels: (IText | IRichText)[]) {\n    if (labels.length === 0) {\n      return [];\n    }\n    const option = (isObject(this.attribute.overlap) ? this.attribute.overlap : {}) as OverlapAttrs;\n    const result: (IText | IRichText)[] = [];\n    const baseMarkGroup = this.getBaseMarkGroup();\n\n    const size = option.size ?? {\n      width: baseMarkGroup?.AABBBounds.width() ?? 0,\n      height: baseMarkGroup?.AABBBounds.height() ?? 0\n    };\n\n    if (size.width === 0 || size.height === 0) {\n      return labels;\n    }\n\n    const {\n      avoidBaseMark,\n      strategy = [],\n      hideOnHit = true,\n      clampForce = true,\n      avoidMarks = [],\n      overlapPadding\n    } = option;\n    const bmpTool = this._bmpTool || bitmapTool(size.width, size.height);\n    const bitmap = this._bitmap || bmpTool.bitmap();\n    const checkBounds = strategy.some(s => s.type === 'bound');\n\n    // 躲避关联的基础图元\n    if (avoidBaseMark) {\n      this._baseMarks?.forEach(mark => {\n        mark.AABBBounds && bitmap.setRange(boundToRange(bmpTool, mark.AABBBounds, true));\n      });\n    }\n\n    // 躲避指定图元\n    if (avoidMarks.length > 0) {\n      avoidMarks.forEach(avoid => {\n        if (isString(avoid)) {\n          getNoneGroupMarksByName(this.getRootNode() as IGroup, avoid).forEach(avoidMark => {\n            avoidMark.AABBBounds && bitmap.setRange(boundToRange(bmpTool, avoidMark.AABBBounds, true));\n          });\n        } else if (avoid.AABBBounds) {\n          bitmap.setRange(boundToRange(bmpTool, avoid.AABBBounds, true));\n        }\n      });\n    }\n\n    for (let i = 0; i < labels.length; i++) {\n      if (labels[i].visible === false) {\n        continue;\n      }\n\n      const text = labels[i] as IText | IRichText;\n      const baseMark = this.getRelatedGraphic(text.attribute);\n      text.update();\n      if (!isRectIntersect(baseMark.AABBBounds, { x1: 0, x2: bmpTool.width, y1: 0, y2: bmpTool.height }, true)) {\n        continue;\n      }\n\n      // 默认位置可以放置\n      if (canPlace(bmpTool, bitmap, text.AABBBounds, clampForce, overlapPadding)) {\n        // 如果配置了限制在图形内部，需要提前判断；\n        if (!checkBounds) {\n          bitmap.setRange(boundToRange(bmpTool, text.AABBBounds, true));\n          result.push(text);\n          continue;\n        }\n\n        if (\n          checkBounds &&\n          baseMark &&\n          baseMark.AABBBounds &&\n          this._canPlaceInside(text.AABBBounds, baseMark.AABBBounds)\n        ) {\n          bitmap.setRange(boundToRange(bmpTool, text.AABBBounds, true));\n          result.push(text);\n          continue;\n        }\n      }\n\n      let hasPlace: ReturnType<typeof place> = false;\n      // 发生碰撞，根据策略寻找可放置的位置\n      for (let j = 0; j < strategy.length; j++) {\n        hasPlace = place(\n          bmpTool,\n          bitmap,\n          strategy[j],\n          <BaseLabelAttrs>this.attribute,\n          text as Text,\n          this._isCollectionBase\n            ? this.getGraphicBounds(null, this._idToPoint.get((labels[i].attribute as any).id))\n            : this.getGraphicBounds(baseMark, labels[i].attribute),\n          this.labeling\n        );\n        if (hasPlace !== false) {\n          text.setAttributes({ x: hasPlace.x, y: hasPlace.y });\n          result.push(text);\n          break;\n        }\n      }\n\n      // 尝试向内挤压\n      if (!hasPlace && clampForce) {\n        // 向内挤压不考虑 overlapPadding\n        const { dx = 0, dy = 0 } = clampText(text as IText, bmpTool.width, bmpTool.height);\n        if (dx === 0 && dy === 0) {\n          if (canPlace(bmpTool, bitmap, text.AABBBounds)) {\n            // xy方向偏移都为0，意味着不考虑 overlapPadding 时，实际上可以放得下\n            bitmap.setRange(boundToRange(bmpTool, text.AABBBounds, true));\n            result.push(text);\n            continue;\n          }\n        } else if (\n          canPlace(\n            bmpTool,\n            bitmap,\n            {\n              x1: text.AABBBounds.x1 + dx,\n              x2: text.AABBBounds.x2 + dx,\n              y1: text.AABBBounds.y1 + dy,\n              y2: text.AABBBounds.y2 + dy\n            }\n            // 向内 clamp 只处理超出的位移量，不叠加 overlapPadding\n          )\n        ) {\n          text.setAttributes({ x: text.attribute.x + dx, y: text.attribute.y + dy });\n          bitmap.setRange(boundToRange(bmpTool, text.AABBBounds, true));\n          result.push(text);\n          continue;\n        }\n      }\n\n      !hasPlace && !hideOnHit && result.push(text);\n    }\n\n    if (isFunction(this.onAfterLabelOverlap)) {\n      this.onAfterLabelOverlap(bitmap);\n    }\n\n    return result;\n  }\n\n  protected getBaseMarkGroup() {\n    const { baseMarkGroupName } = this.attribute as BaseLabelAttrs;\n    if (!baseMarkGroupName) {\n      return;\n    }\n    return (this.getRootNode() as IGroup).find(node => node.name === baseMarkGroupName, true) as IGroup;\n  }\n\n  protected getGraphicBounds(graphic?: IGraphic, point?: Partial<PointLocationCfg>, position?: string): IBoundsLike;\n  protected getGraphicBounds(graphic?: IGraphic, point: Partial<PointLocationCfg> = {}): IBoundsLike {\n    if (graphic) {\n      if (graphic.attribute.visible !== false) {\n        return graphic.AABBBounds;\n      }\n      const { x, y } = graphic.attribute;\n      return { x1: x, x2: x, y1: y, y2: y } as IBoundsLike;\n    }\n    const { x, y } = point;\n    return { x1: x, x2: x, y1: y, y2: y } as IBoundsLike;\n  }\n\n  protected _renderLabels(labels: (IText | IRichText)[]) {\n    const disableAnimation = this._enableAnimation === false || this.attribute.animation === false;\n\n    if (disableAnimation) {\n      this._renderWithOutAnimation(labels);\n    } else {\n      this._renderWithAnimation(labels);\n    }\n  }\n\n  protected _renderWithAnimation(labels: (IText | IRichText)[]) {\n    const currentTextMap: Map<any, { text: IText | IRichText; labelLine?: ILine }> = new Map();\n    const prevTextMap: Map<any, { text: IText | IRichText; labelLine?: ILine }> = this._graphicToText || new Map();\n    const texts = [] as (IText | IRichText)[];\n    const labelLines = [] as ILine[];\n    const { visible: showLabelLine } = this.attribute.line ?? {};\n\n    labels.forEach((text, index) => {\n      const relatedGraphic = this.getRelatedGraphic(text.attribute);\n      const textId = (text.attribute as LabelItem).id;\n      const textKey = this._isCollectionBase ? textId : relatedGraphic;\n      const state = prevTextMap?.get(textKey) ? 'update' : 'enter';\n      let labelLine: ILine;\n      if (showLabelLine) {\n        labelLine = this._createLabelLine(text as IText, relatedGraphic);\n      }\n      // TODO: add animate\n      if (state === 'enter') {\n        texts.push(text);\n        currentTextMap.set(textKey, labelLine ? { text, labelLine } : { text });\n        if (relatedGraphic) {\n          const { from, to } = getAnimationAttributes(text.attribute, 'fadeIn');\n          this.add(text);\n\n          if (labelLine) {\n            labelLines.push(labelLine);\n            this.add(labelLine);\n          }\n\n          this._syncStateWithRelatedGraphic(relatedGraphic);\n          // enter的时长如果不是大于0，那么直接跳过动画\n          this._animationConfig.enter.duration > 0 &&\n            relatedGraphic.once('animate-bind', a => {\n              // text和labelLine共用一个from\n              text.setAttributes(from);\n              labelLine && labelLine.setAttributes(from);\n              const listener = this._afterRelatedGraphicAttributeUpdate(\n                text,\n                texts,\n                labelLine,\n                labelLines,\n                index,\n                relatedGraphic,\n                to,\n                this._animationConfig.enter\n              );\n              relatedGraphic.on('afterAttributeUpdate', listener);\n            });\n        }\n      } else if (state === 'update') {\n        const prevLabel = prevTextMap.get(textKey);\n        prevTextMap.delete(textKey);\n        currentTextMap.set(textKey, prevLabel);\n        const prevText = prevLabel.text;\n        const { duration, easing } = this._animationConfig.update;\n        updateAnimation(prevText as Text, text as Text, this._animationConfig.update);\n        if (prevLabel.labelLine && labelLine) {\n          prevLabel.labelLine.animate().to(labelLine.attribute, duration, easing);\n        }\n      }\n    });\n    prevTextMap.forEach(label => {\n      label.text\n        ?.animate()\n        .to(\n          getAnimationAttributes(label.text.attribute, 'fadeOut').to,\n          this._animationConfig.exit.duration,\n          this._animationConfig.exit.easing\n        )\n        .onEnd(() => {\n          this.removeChild(label.text);\n          if (label.labelLine) {\n            this.removeChild(label.labelLine);\n          }\n        });\n    });\n\n    this._graphicToText = currentTextMap;\n  }\n\n  protected _renderWithOutAnimation(labels: (IText | IRichText)[]) {\n    const currentTextMap: Map<any, LabelContent> = new Map();\n    const prevTextMap: Map<any, LabelContent> = this._graphicToText || new Map();\n    const texts = [] as (IText | IRichText)[];\n    const { visible: showLabelLine } = this.attribute.line ?? {};\n\n    labels.forEach(text => {\n      const relatedGraphic = this.getRelatedGraphic(text.attribute);\n      const state = prevTextMap?.get(relatedGraphic) ? 'update' : 'enter';\n      const textKey = this._isCollectionBase ? (text.attribute as LabelItem).id : relatedGraphic;\n      let labelLine;\n      if (showLabelLine) {\n        labelLine = this._createLabelLine(text as IText, relatedGraphic);\n      }\n\n      if (state === 'enter') {\n        texts.push(text);\n        currentTextMap.set(textKey, labelLine ? { text, labelLine } : { text });\n        this.add(text);\n        if (labelLine) {\n          this.add(labelLine);\n        }\n        this._syncStateWithRelatedGraphic(relatedGraphic);\n      } else if (state === 'update') {\n        const prevLabel = prevTextMap.get(textKey);\n        prevTextMap.delete(textKey);\n        currentTextMap.set(textKey, prevLabel);\n        prevLabel.text.setAttributes(text.attribute as any);\n        if (prevLabel.labelLine && labelLine) {\n          prevLabel.labelLine.setAttributes(labelLine.attribute);\n        }\n      }\n    });\n\n    prevTextMap.forEach(label => {\n      this.removeChild(label.text);\n      if (label.labelLine) {\n        this.removeChild(label.labelLine);\n      }\n    });\n\n    this._graphicToText = currentTextMap;\n  }\n\n  protected _handleRelatedGraphicSetState = (e: any) => {\n    if (\n      e.detail?.type === AttributeUpdateType.STATE ||\n      (e.detail?.type === AttributeUpdateType.ANIMATE_UPDATE && e.detail.animationState?.isFirstFrameOfStep)\n    ) {\n      const currentStates = e.target?.currentStates ?? [];\n      const labels = this._isCollectionBase ? [...this._graphicToText.values()] : [this._graphicToText.get(e.target)];\n\n      labels.forEach(label => {\n        if (label) {\n          if (label.text) {\n            label.text.useStates(currentStates);\n          }\n\n          if (label.labelLine) {\n            label.labelLine.useStates(currentStates);\n          }\n        }\n      });\n    }\n  };\n\n  protected _syncStateWithRelatedGraphic(relatedGraphic: IGraphic) {\n    if (this.attribute.syncState) {\n      relatedGraphic.on('afterAttributeUpdate', this._handleRelatedGraphicSetState);\n    }\n  }\n\n  // 默认labelLine和text共用相同动画属性\n  protected _afterRelatedGraphicAttributeUpdate(\n    text: IText | IRichText,\n    texts: (IText | IRichText)[],\n    labelLine: ILine,\n    labelLines: ILine[],\n    index: number,\n    relatedGraphic: IGraphic,\n    to: any,\n    { mode, duration, easing, delay }: ILabelAnimation\n  ) {\n    // TODO: 跟随动画\n    const listener = (event: any) => {\n      const { detail } = event;\n      if (!detail) {\n        return {};\n      }\n      const step = detail.animationState?.step;\n      const isValidAnimateState =\n        detail.type === AttributeUpdateType.ANIMATE_UPDATE &&\n        step &&\n        // 不是第一个wait\n        !(step.type === 'wait' && step.prev?.type == null);\n\n      if (!isValidAnimateState) {\n        return {};\n      }\n      // const prevStep = step.prev;\n      // if (prevStep && prevStep.type === 'wait' && prevStep.prev?.type == null) {\n      //   delay = delay ?? step.position;\n      // }\n      if (detail.type === AttributeUpdateType.ANIMATE_END) {\n        text.setAttributes(to);\n        labelLine && labelLine.setAttributes(to);\n        return;\n      }\n\n      const onStart = () => {\n        if (relatedGraphic) {\n          relatedGraphic.onAnimateBind = undefined;\n          relatedGraphic.removeEventListener('afterAttributeUpdate', listener);\n        }\n      };\n\n      switch (mode) {\n        case 'after':\n          // 3. 当前关联图元的动画播放结束后\n          if (detail.animationState.end) {\n            text.animate({ onStart }).wait(delay).to(to, duration, easing);\n            labelLine && labelLine.animate().wait(delay).to(to, duration, easing);\n          }\n          break;\n        case 'after-all':\n          //  2. 所有完成后才开始；\n          if (index === texts.length - 1) {\n            if (detail.animationState.end) {\n              texts.forEach(t => {\n                t.animate({ onStart }).wait(delay).to(to, duration, easing);\n              });\n              labelLines.forEach(t => {\n                t.animate().wait(delay).to(to, duration, easing);\n              });\n            }\n          }\n          break;\n        case 'same-time':\n        default:\n          if (this._isCollectionBase) {\n            const point = this._idToPoint.get((text.attribute as LabelItem).id);\n            if (\n              point &&\n              (!text.animates || !text.animates.has('label-animate')) &&\n              relatedGraphic.containsPoint(point.x, point.y, IContainPointMode.LOCAL, this.stage?.pickerService)\n            ) {\n              text.animate({ onStart }).wait(delay).to(to, duration, easing);\n              labelLine && labelLine.animate().wait(delay).to(to, duration, easing);\n            }\n          } else if (detail.animationState.isFirstFrameOfStep) {\n            text.animate({ onStart }).wait(delay).to(to, duration, easing);\n            labelLine && labelLine.animate().wait(delay).to(to, duration, easing);\n          }\n\n          break;\n      }\n    };\n    return listener;\n  }\n\n  protected _smartInvert(labels: (IText | IRichText)[]) {\n    const option = (isObject(this.attribute.smartInvert) ? this.attribute.smartInvert : {}) as SmartInvertAttrs;\n    const { textType, contrastRatiosThreshold, alternativeColors, mode } = option;\n    const fillStrategy = option.fillStrategy ?? 'invertBase';\n    const strokeStrategy = option.strokeStrategy ?? 'base';\n    const brightColor = option.brightColor ?? '#ffffff';\n    const darkColor = option.darkColor ?? '#000000';\n    const outsideEnable = option.outsideEnable ?? false;\n\n    if (fillStrategy === 'null' && strokeStrategy === 'null') {\n      return;\n    }\n\n    for (let i = 0; i < labels.length; i++) {\n      const label = labels[i];\n      if (!label) {\n        continue;\n      }\n\n      const baseMark = this.getRelatedGraphic(label.attribute as LabelItem);\n\n      /**\n       * 增加smartInvert时fillStrategy和 strokeStrategy的四种策略：\n       * base（baseMark色），\n       * inverBase（执行智能反色），\n       * similarBase（智能反色的补色），\n       * null（不执行智能反色，保持fill设置的颜色）\n       * */\n      const backgroundColor = baseMark.attribute.fill as IColor;\n      const foregroundColor = label.attribute.fill as IColor;\n      const baseColor = backgroundColor;\n      const invertColor = labelSmartInvert(\n        foregroundColor,\n        backgroundColor,\n        textType,\n        contrastRatiosThreshold,\n        alternativeColors,\n        mode\n      );\n      const similarColor = contrastAccessibilityChecker(invertColor, brightColor) ? brightColor : darkColor;\n\n      if (outsideEnable) {\n        const fill = smartInvertStrategy(fillStrategy, baseColor, invertColor, similarColor);\n        fill && label.setAttributes({ fill });\n\n        if (label.attribute.lineWidth === 0) {\n          continue;\n        }\n\n        const stroke = smartInvertStrategy(strokeStrategy, baseColor, invertColor, similarColor);\n        stroke && label.setAttributes({ stroke });\n      } else {\n        const isInside = this._canPlaceInside(label.AABBBounds, baseMark.AABBBounds);\n        if (isInside) {\n          const fill = smartInvertStrategy(fillStrategy, baseColor, invertColor, similarColor);\n          fill && label.setAttributes({ fill });\n\n          if (label.attribute.lineWidth === 0) {\n            continue;\n          }\n\n          const stroke = smartInvertStrategy(strokeStrategy, baseColor, invertColor, similarColor);\n          stroke && label.setAttributes({ stroke });\n        } else {\n          /** 当label无法设置stroke时，不进行反色计算（容易反色为白色与白色背景混合不可见） */\n          if (label.attribute.lineWidth === 0) {\n            continue;\n          }\n\n          /** 当label设置stroke时，保留stroke设置的颜色，根据stroke对fill做反色 */\n          if (label.attribute.stroke) {\n            label.setAttributes({\n              fill: labelSmartInvert(\n                label.attribute.fill as IColor,\n                label.attribute.stroke as IColor,\n                textType,\n                contrastRatiosThreshold,\n                alternativeColors,\n                mode\n              )\n            });\n            continue;\n          }\n\n          /** 当label未设置stroke，且可设置stroke时，正常计算 */\n          const fill = smartInvertStrategy(fillStrategy, baseColor, invertColor, similarColor);\n          fill && label.setAttributes({ fill });\n\n          const stroke = smartInvertStrategy(strokeStrategy, baseColor, invertColor, similarColor);\n          stroke && label.setAttributes({ stroke });\n        }\n      }\n    }\n  }\n\n  /**\n   * 是否在图形内部\n   * @param textBound\n   * @param shapeBound\n   * @returns\n   */\n  protected _canPlaceInside(textBound: IBoundsLike, shapeBound: IAABBBounds) {\n    if (!textBound || !shapeBound) {\n      return false;\n    }\n    return shapeBound.encloses(textBound);\n  }\n\n  setLocation(point: PointLocationCfg) {\n    this.translateTo(point.x, point.y);\n  }\n\n  disableAnimation() {\n    this._enableAnimation = false;\n  }\n\n  enableAnimation() {\n    this._enableAnimation = true;\n  }\n}\n"]}