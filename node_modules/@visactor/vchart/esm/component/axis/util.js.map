{"version":3,"sources":["../src/component/axis/util.ts"],"names":[],"mappings":"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","file":"util.js","sourcesContent":["import { get } from '@visactor/vutils';\nimport { mergeSpec } from '../../util/spec/merge-spec';\nimport type { IOrientType, IPolarOrientType } from '../../typings';\nimport type { AxisType, ICommonAxisSpec, ILinearAxisSpec } from './interface';\nimport { transformComponentStyle } from '../../util/style';\nimport { isXAxis, isYAxis } from './cartesian/util/common';\nimport { getComponentThemeFromOption } from '../util';\nimport type { ITheme } from '../../theme';\n\nexport const DEFAULT_TITLE_STYLE = {\n  left: {\n    textAlign: 'center',\n    textBaseline: 'bottom'\n  },\n  right: {\n    textAlign: 'center',\n    textBaseline: 'bottom'\n  },\n  radius: {},\n  angle: {}\n};\n\nexport function transformAxisLineStyle(lineCfg: any) {\n  lineCfg = transformComponentStyle(lineCfg);\n  lineCfg.startSymbol = transformComponentStyle(lineCfg.startSymbol);\n  lineCfg.endSymbol = transformComponentStyle(lineCfg.endSymbol);\n\n  return lineCfg;\n}\n\nexport function getAxisLabelOffset(axisSpec: ICommonAxisSpec) {\n  let labelOffset = 0;\n  if (get(axisSpec, 'tick.visible')) {\n    labelOffset += get(axisSpec, 'tick.tickSize');\n  }\n\n  if (get(axisSpec, 'label.visible')) {\n    labelOffset += get(axisSpec, 'label.space');\n  }\n\n  return labelOffset;\n}\n\nexport function getLinearAxisSpecDomain(\n  axisSpec: ILinearAxisSpec,\n  defaultDomain?: {\n    min?: number;\n    max?: number;\n  }\n) {\n  // 兼容策略\n  return {\n    min: axisSpec.min ?? axisSpec.range?.min ?? defaultDomain?.min,\n    max: axisSpec.max ?? axisSpec.range?.max ?? defaultDomain?.max\n  };\n}\n\nexport function isValidCartesianAxis(spec: any) {\n  const orient = spec?.orient;\n  return orient === 'top' || orient === 'bottom' || orient === 'left' || orient === 'right' || orient === 'z';\n}\n\nexport function isValidPolarAxis(spec: any) {\n  const orient = spec?.orient;\n  return orient === 'angle' || orient === 'radius';\n}\n\nexport const getCartesianAxisTheme = (orient: IOrientType, type: AxisType, chartTheme: ITheme) => {\n  const axisTypeTheme =\n    (type === 'band'\n      ? getComponentThemeFromOption('axisBand', chartTheme)\n      : (['linear', 'log', 'symlog'] as AxisType[]).includes(type)\n      ? getComponentThemeFromOption('axisLinear', chartTheme)\n      : {}) ?? {};\n  const axisTheme = isXAxis(orient)\n    ? getComponentThemeFromOption('axisX', chartTheme)\n    : isYAxis(orient)\n    ? getComponentThemeFromOption('axisY', chartTheme)\n    : getComponentThemeFromOption('axisZ', chartTheme);\n  return mergeSpec({}, getComponentThemeFromOption('axis', chartTheme), axisTypeTheme, axisTheme);\n};\n\nexport const getPolarAxisTheme = (orient: IPolarOrientType, type: AxisType, chartTheme: ITheme) => {\n  const axisTypeTheme =\n    (type === 'band'\n      ? getComponentThemeFromOption('axisBand', chartTheme)\n      : type === 'linear'\n      ? getComponentThemeFromOption('axisLinear', chartTheme)\n      : {}) ?? {};\n  const axisTheme =\n    orient === 'angle'\n      ? getComponentThemeFromOption('axisAngle', chartTheme)\n      : getComponentThemeFromOption('axisRadius', chartTheme);\n  return mergeSpec({}, getComponentThemeFromOption('axis', chartTheme), axisTypeTheme, axisTheme);\n};\n\nexport const isDiscreteAxis = (axisType: AxisType) =>\n  axisType === 'band' || axisType === 'ordinal' || axisType === 'point';\n"]}