{"version":3,"sources":["../src/series/util/label-mark.ts"],"names":[],"mappings":"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","file":"label-mark.js","sourcesContent":["import type { ITextMark } from '../../mark/text';\nimport type { DirectionType } from '../../typings/space';\n// eslint-disable-next-line no-duplicate-imports\nimport { Direction } from '../../typings/space';\nimport { AttributeLevel } from '../../constant';\nimport type { ISeries } from '../interface';\n\n// 直角坐标系下 固定点位的标签\n// only used in rangeColumn\nexport function setRectLabelPos(\n  component: ISeries,\n  labelMark: ITextMark,\n  position: string,\n  offset: number,\n  x: (datum: any) => number,\n  x1: (datum: any) => number,\n  y: (datum: any) => number,\n  y1: (datum: any) => number,\n  direction: () => DirectionType\n) {\n  component.setMarkStyle(labelMark, {\n    textAlign: (datum: any) => {\n      const d = direction();\n      if (d === Direction.vertical) {\n        return 'center';\n      }\n      const _x = x(datum);\n      const _x1 = x1(datum);\n      // d = h\n      if (position === 'middle') {\n        return 'center';\n      }\n      // 柱子 从左到右\n      if (_x >= _x1) {\n        if (position === 'start') {\n          return 'left';\n        }\n        if (position === 'end') {\n          return 'right';\n        }\n        if (position === 'outside') {\n          return 'left';\n        }\n      }\n      // 柱子 从右到左\n      else {\n        if (position === 'start') {\n          return 'right';\n        }\n        if (position === 'end') {\n          return 'left';\n        }\n        if (position === 'outside') {\n          return 'right';\n        }\n      }\n      return 'center';\n    },\n    textBaseline: (datum: any) => {\n      const d = direction();\n      if (d === Direction.horizontal) {\n        return 'middle';\n      }\n      // d = v\n      const _y = y(datum);\n      const _y1 = y1(datum);\n      if (position === 'middle') {\n        return 'middle';\n      }\n      // 柱子 从下到上\n      if (_y1 >= _y) {\n        if (position === 'start') {\n          return 'bottom';\n        }\n        if (position === 'end') {\n          return 'top';\n        }\n        if (position === 'outside') {\n          return 'bottom';\n        }\n      }\n      // 柱子 从上到下\n      else {\n        if (position === 'start') {\n          return 'top';\n        }\n        if (position === 'end') {\n          return 'bottom';\n        }\n        if (position === 'outside') {\n          return 'top';\n        }\n      }\n      return 'middle';\n    }\n  });\n  component.setMarkStyle(\n    labelMark,\n    {\n      x: (datum: any) => {\n        const d = direction();\n        const _x = x(datum);\n        const _x1 = x1(datum);\n        if (d === Direction.vertical) {\n          return (_x + _x1) / 2;\n        }\n        // d = h\n        if (position === 'middle') {\n          return (_x + _x1) / 2;\n        }\n        // 柱子 从左到右\n        if (_x >= _x1) {\n          if (position === 'start') {\n            return _x1 + offset;\n          }\n          if (position === 'end') {\n            return _x - offset;\n          }\n          if (position === 'outside') {\n            return _x + offset;\n          }\n        }\n        // 柱子 从右到左\n        else {\n          if (position === 'start') {\n            return _x1 - offset;\n          }\n          if (position === 'end') {\n            return _x + offset;\n          }\n          if (position === 'outside') {\n            return _x - offset;\n          }\n        }\n        return (_x + _x1) / 2;\n      },\n      y: (datum: any) => {\n        const d = direction();\n        const _y = y(datum);\n        const _y1 = y1(datum);\n        if (d === Direction.horizontal) {\n          return (_y + _y1) / 2;\n        }\n        // d = v\n        if (position === 'middle') {\n          return (_y + _y1) / 2;\n        }\n        // 柱子 从下到上\n        if (_y >= _y1) {\n          if (position === 'start') {\n            return _y1 + offset;\n          }\n          if (position === 'end') {\n            return _y - offset;\n          }\n          if (position === 'outside') {\n            return _y + offset;\n          }\n        }\n        // 柱子 从上到下\n        else {\n          if (position === 'start') {\n            return _y1 - offset;\n          }\n          if (position === 'end') {\n            return _y + offset;\n          }\n          if (position === 'outside') {\n            return _y - offset;\n          }\n        }\n        return (_y + _y1) / 2;\n      }\n    },\n    'normal',\n    AttributeLevel.Series\n  );\n}\n"]}