{"version":3,"sources":["../src/mark/component.ts"],"names":[],"mappings":";;;AAAA,+CAA4C;AAG5C,2DAA0D;AAE1D,gDAA4C;AAG5C,2CAAgD;AAIhD,MAAa,aAAc,SAAQ,oBAAqB;IAOtD,YAAY,IAAY,EAAE,MAAmB;QAC3C,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QANtB,SAAI,GAAW,WAAW,CAAC;QAQzB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,aAAa,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;IAC3B,CAAC;IAES,YAAY,CAAC,KAA2B;QAChD,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAGpC,MAAM,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI;aACjB,IAAI,CAAC,+BAAe,CAAC,SAAS,EAAE,KAAK,aAAL,KAAK,cAAL,KAAK,GAAI,IAAI,CAAC,QAAQ,EAAE,EAAE,aAAa,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;aACjH,EAAE,CAAC,EAAE,CAAC,CAAC;QACV,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;IAC/B,CAAC;;AAvBH,sCAwBC;AAvBiB,kBAAI,GAAG,mBAAY,CAAC,SAAS,CAAC;AAyBzC,MAAM,qBAAqB,GAAG,GAAG,EAAE;IACxC,iBAAO,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;AAC1D,CAAC,CAAC;AAFW,QAAA,qBAAqB,yBAEhC","file":"component.js","sourcesContent":["import { Factory } from './../core/factory';\nimport type { IGroupMark } from '@visactor/vgrammar-core';\n// eslint-disable-next-line no-duplicate-imports\nimport { GrammarMarkType } from '@visactor/vgrammar-core';\nimport type { ICommonSpec } from '../typings';\nimport { BaseMark } from './base/base-mark';\nimport type { IMarkOption, IMarkRaw } from './interface';\n// eslint-disable-next-line no-duplicate-imports\nimport { MarkTypeEnum } from './interface/type';\n\nexport type IComponentMark = IMarkRaw<ICommonSpec>;\n\nexport class ComponentMark extends BaseMark<ICommonSpec> implements IComponentMark {\n  static readonly type = MarkTypeEnum.component;\n  type: string = 'component';\n\n  private _componentType: string;\n  private _mode: '2d' | '3d';\n\n  constructor(name: string, option: IMarkOption) {\n    super(name, option);\n    // 这里需要将 type 指定为具体的组件名称，即调用 vgrammar 的 registerComponent API 注册的组件名称\n    this._componentType = option.componentType;\n    this._mode = option.mode;\n  }\n  /** 创建语法元素对象 */\n  protected _initProduct(group?: string | IGroupMark) {\n    const view = this.getVGrammarView();\n\n    // 声明语法元素\n    const id = this.getProductId();\n    this._product = view\n      .mark(GrammarMarkType.component, group ?? view.rootMark, { componentType: this._componentType, mode: this._mode })\n      .id(id);\n    this._compiledProductId = id;\n  }\n}\n\nexport const registerComponentMark = () => {\n  Factory.registerMark(ComponentMark.type, ComponentMark);\n};\n"]}