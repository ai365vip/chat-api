{"version":3,"sources":["../src/series/pie/pie-transformer.ts"],"names":[],"mappings":";;;AAAA,qCAAuC;AACvC,kCAAoD;AACpD,4CAAkD;AAGlD,MAAa,wBAGX,SAAQ,gCAA+B;IAC7B,mBAAmB,CAAC,IAAO;QACnC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,8BAAkB,CAAC,GAAG,CAAC,CAAC;IACvD,CAAC;IAGS,iBAAiB,CAAC,IAAO,EAAE,SAAc;QACjD,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,uBAAuB,EAAE,EAAE;YAClC,MAAM,aAAa,GAAG,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;YAI/D,OAAO,GAAG,IAAA,gBAAS,EAAC,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,aAAa,EAAE,IAAI,CAAQ,CAAC;YACjE,IAAI,OAAO,CAAC,KAAK,CAAC,QAAQ,KAAK,QAAQ,EAAE;gBACvC,OAAO,CAAC,KAAK,GAAG,IAAA,gBAAS,EAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;aACtE;iBAAM;gBACL,OAAO,CAAC,KAAK,GAAG,IAAA,gBAAS,EAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;aACtE;SACF;QAED,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;IAClC,CAAC;CACF;AA3BD,4DA2BC","file":"pie-transformer.js","sourcesContent":["import { mergeSpec } from '../../util';\nimport { BaseSeriesSpecTransformer } from '../base';\nimport { SeriesMarkNameEnum } from '../interface';\nimport type { IBasePieSeriesSpec, IPieSeriesTheme } from './interface';\n\nexport class PieSeriesSpecTransformer<\n  T extends IBasePieSeriesSpec = IBasePieSeriesSpec,\n  K extends IPieSeriesTheme = IPieSeriesTheme\n> extends BaseSeriesSpecTransformer<T, K> {\n  protected _transformLabelSpec(spec: T): void {\n    this._addMarkLabelSpec(spec, SeriesMarkNameEnum.pie);\n  }\n\n  /** 将 theme merge 到 spec 中 */\n  protected _mergeThemeToSpec(spec: T, chartSpec: any): { spec: T; theme: K } {\n    const theme = this._theme;\n    let newSpec = spec;\n    if (this._shouldMergeThemeToSpec()) {\n      const specFromChart = this._getDefaultSpecFromChart(chartSpec);\n\n      // this._originalSpec + specFromChart + this._theme = this._spec\n      // 动态处理 label 样式，对于展示在内部的 label 默认使用 innerLabel 样式\n      newSpec = mergeSpec({}, this._theme, specFromChart, spec) as any;\n      if (newSpec.label.position === 'inside') {\n        newSpec.label = mergeSpec({}, this._theme.innerLabel, newSpec.label);\n      } else {\n        newSpec.label = mergeSpec({}, this._theme.outerLabel, newSpec.label);\n      }\n    }\n\n    return { spec: newSpec, theme };\n  }\n}\n"]}