{"version":3,"sources":["../src/series/sankey/animation.ts"],"names":[],"mappings":";;;AAGA,+CAAgD;AAChD,gDAA6C;AAC7C,mDAA4D;AAWrD,MAAM,YAAY,GAAG,CAAC,MAA8B,EAAE,YAAqB,IAAI,EAAwB,EAAE;IAC9G,OAAO;QACL,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,iBAAS,CAAC,UAAU,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc;QAChF,OAAO,EAAE;YACP,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,SAAS;YAClD,MAAM,EAAE,iBAAS,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU;SACvD;KACF,CAAC;AACJ,CAAC,CAAC;AARW,QAAA,YAAY,gBAQvB;AAEK,MAAM,aAAa,GAAG,CAAC,MAA8B,EAAE,YAAqB,IAAI,EAAwB,EAAE;IAC/G,OAAO;QACL,IAAI,EAAE,MAAM,CAAC,SAAS,KAAK,iBAAS,CAAC,UAAU,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,eAAe;QAClF,OAAO,EAAE;YACP,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,SAAS;YAClD,MAAM,EAAE,iBAAS,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU;SACvD;KACF,CAAC;AACJ,CAAC,CAAC;AARW,QAAA,aAAa,iBAQxB;AAEK,MAAM,yBAAyB,GAAG,CACvC,MAA8B,EAC9B,MAA0B,EACJ,EAAE;IACxB,QAAQ,MAAM,EAAE;QACd,KAAK,QAAQ,CAAC,CAAC;YACb,OAAO;gBACL,IAAI,EAAE,QAAQ;aACf,CAAC;SACH;QACD,KAAK,QAAQ,CAAC,CAAC;YACb,OAAO,IAAA,oBAAY,EAAC,MAAM,CAAC,CAAC;SAC7B;QACD,OAAO,CAAC,CAAC;YACP,OAAO,IAAA,oBAAY,EAAC,MAAM,CAAC,CAAC;SAC7B;KACF;AACH,CAAC,CAAC;AAjBW,QAAA,yBAAyB,6BAiBpC;AAEK,MAAM,yBAAyB,GAAG,CAAC,MAA0B,EAAwB,EAAE;IAC5F,QAAQ,MAAM,EAAE;QACd,KAAK,QAAQ,CAAC,CAAC;YACb,OAAO;gBACL,IAAI,EAAE,QAAQ;aACf,CAAC;SACH;QACD,KAAK,QAAQ,CAAC,CAAC;YACb,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;SACnC;QACD,OAAO,CAAC,CAAC;YACP,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;SACnC;KACF;AACH,CAAC,CAAC;AAdW,QAAA,yBAAyB,6BAcpC;AAEK,MAAM,uBAAuB,GAAG,GAAG,EAAE;IAC1C,iBAAO,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC,MAA8B,EAAE,MAA0B,EAAE,EAAE,CAAC,iBACtG,MAAM,EAAE,IAAA,iCAAyB,EAAC,MAAM,EAAE,MAAM,CAAC,IAC9C,2BAAkB,EACrB,CAAC,CAAC;IACJ,iBAAO,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,CAAC,MAAe,EAAE,MAA0B,EAAE,EAAE,CAAC,CAAC;QAC5F,MAAM,EAAE,IAAA,iCAAyB,EAAC,MAAM,CAAC;QACzC,KAAK,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE;QACjC,IAAI,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE;QACjC,SAAS,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE;KACvC,CAAC,CAAC,CAAC;AACN,CAAC,CAAC;AAXW,QAAA,uBAAuB,2BAWlC","file":"animation.js","sourcesContent":["import type { IAnimationTypeConfig } from '@visactor/vgrammar-core';\nimport type { DirectionType } from '../../typings';\n// eslint-disable-next-line no-duplicate-imports\nimport { Direction } from '../../typings/space';\nimport { Factory } from '../../core/factory';\nimport { FadeInOutAnimation } from '../../animation/config';\n\nexport type SankeyMark = 'node' | 'link' | 'label';\n\nexport type SankeyAppearPreset = 'growIn' | 'fadeIn';\n\nexport interface ISankeyAnimationParams {\n  direction: DirectionType;\n  growFrom: () => number;\n}\n\nexport const sankeyGrowIn = (params: ISankeyAnimationParams, isOverall: boolean = true): IAnimationTypeConfig => {\n  return {\n    type: params.direction === Direction.horizontal ? 'growWidthIn' : 'growHeightIn',\n    options: {\n      overall: isOverall ? params.growFrom() : isOverall,\n      orient: Direction.horizontal ? 'positive' : 'negative'\n    }\n  };\n};\n\nexport const sankeyGrowOut = (params: ISankeyAnimationParams, isOverall: boolean = true): IAnimationTypeConfig => {\n  return {\n    type: params.direction === Direction.horizontal ? 'growWidthOut' : 'growHeightOut',\n    options: {\n      overall: isOverall ? params.growFrom() : isOverall,\n      orient: Direction.horizontal ? 'positive' : 'negative'\n    }\n  };\n};\n\nexport const sankeyNodePresetAnimation = (\n  params: ISankeyAnimationParams,\n  preset: SankeyAppearPreset\n): IAnimationTypeConfig => {\n  switch (preset) {\n    case 'fadeIn': {\n      return {\n        type: 'fadeIn'\n      };\n    }\n    case 'growIn': {\n      return sankeyGrowIn(params);\n    }\n    default: {\n      return sankeyGrowIn(params);\n    }\n  }\n};\n\nexport const sankeyLinkPresetAnimation = (preset: SankeyAppearPreset): IAnimationTypeConfig => {\n  switch (preset) {\n    case 'fadeIn': {\n      return {\n        type: 'fadeIn'\n      };\n    }\n    case 'growIn': {\n      return { type: 'linkPathGrowIn' };\n    }\n    default: {\n      return { type: 'linkPathGrowIn' };\n    }\n  }\n};\n\nexport const registerSankeyAnimation = () => {\n  Factory.registerAnimation('sankeyNode', (params: ISankeyAnimationParams, preset: SankeyAppearPreset) => ({\n    appear: sankeyNodePresetAnimation(params, preset),\n    ...FadeInOutAnimation\n  }));\n  Factory.registerAnimation('sankeyLinkPath', (params: unknown, preset: SankeyAppearPreset) => ({\n    appear: sankeyLinkPresetAnimation(preset),\n    enter: { type: 'linkPathGrowIn' },\n    exit: { type: 'linkPathGrowOut' },\n    disappear: { type: 'linkPathGrowOut' }\n  }));\n};\n"]}